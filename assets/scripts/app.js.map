{"version":3,"file":"app.js","sources":["webpack://project-planner/app.js"],"sourcesContent":["(()=>{\"use strict\";class t{static clearEventListeners(t){const e=t.cloneNode(!0);return t.replaceWith(e),e}static moveElement(t,e){const s=document.getElementById(t);document.querySelector(e).append(s),s.scrollIntoView({behavior:\"smooth\"})}}class e extends class{constructor(t,e=!1){this.hostElement=t?document.getElementById(t):document.body,this.insertBefore=e}detach(){this.element&&this.element.remove()}attach(){this.hostElement.insertAdjacentElement(this.insertBefore?\"afterbegin\":\"beforeend\",this.element)}}{constructor(t,e,s){super(s),this.tooltipText=e,this.closeNotifier=t,this.create()}closeTooltip(){this.detach(),this.closeNotifier()}create(){const t=document.createElement(\"div\");t.className=\"card\";const e=document.getElementById(\"tooltip\"),s=document.importNode(e.content,!0);s.querySelector(\"p\").textContent=this.tooltipText,t.append(s);const n=this.hostElement.offsetLeft+20,i=this.hostElement.offsetTop+this.hostElement.clientHeight-this.hostElement.parentElement.scrollTop-10;t.style.position=\"absolute\",t.style.left=`${n}px`,t.style.top=`${i}px`,t.addEventListener(\"click\",this.closeTooltip.bind(this)),this.element=t}}class s{constructor(t,e,s){this.id=t,this.hasActiveTooltip=!1,this.updateProjectListsHandler=e,this.connectMoreInfoButton(),this.connectSwitchButton(s),this.connectDrag()}connectMoreInfoButton(){document.getElementById(this.id).querySelector(\"button:first-of-type\").addEventListener(\"click\",this.showMoreInfoHandler.bind(this))}showMoreInfoHandler(){if(this.hasActiveTooltip)return;const t=document.getElementById(this.id).dataset.extraInfo;new e((()=>{this.hasActiveTooltip=!1}),t,this.id).attach(),this.hasActiveTooltip=!0}connectDrag(){document.getElementById(this.id).addEventListener(\"dragstart\",(t=>{t.dataTransfer.setData(\"text/plain\",this.id),t.dataTransfer.effectAllowed=\"move\"}))}connectSwitchButton(e){let s=document.getElementById(this.id).querySelector(\"button:last-of-type\");s=t.clearEventListeners(s),s.textContent=\"active\"===e?\"Finish\":\"Activate\",s.addEventListener(\"click\",this.updateProjectListsHandler.bind(null,this.id))}update(t,e){this.updateProjectListsHandler=t,this.connectSwitchButton(e)}}class n{constructor(t){this.projects=[],this.type=t;const e=document.querySelectorAll(`#${t}-projects li`);for(const t of e)this.projects.push(new s(t.id,this.switchProject.bind(this),this.type));this.connectDroppable()}connectDroppable(){const t=document.querySelector(`#${this.type}-projects ul`);t.addEventListener(\"dragenter\",(e=>{\"text/plain\"===e.dataTransfer.types[0]&&e.preventDefault(),t.parentElement.classList.add(\"droppable\"),e.preventDefault()})),t.addEventListener(\"dragover\",(t=>{\"text/plain\"===t.dataTransfer.types[0]&&t.preventDefault()})),t.addEventListener(\"dragleave\",(e=>{e.relatedTarget.closest(`#${this.type}-projects ul`)!==t&&t.parentElement.classList.remove(\"droppable\")})),t.addEventListener(\"drop\",(e=>{const s=e.dataTransfer.getData(\"text/plain\");this.projects.find((t=>t.id===s))||document.getElementById(s).querySelector(\"button:last-of-type\").click(),t.parentElement.classList.remove(\"droppable\")}))}addProject(e){this.projects.push(e),t.moveElement(e.id,`#${this.type}-projects ul`),e.update(this.switchProject.bind(this),this.type)}setSwitchHandlerFn(t){this.switchHandler=t}switchProject(t){this.switchHandler(this.projects.find((e=>e.id===t))),this.projects=this.projects.filter((e=>e.id!==t))}}(class{static init(){const t=new n(\"active\"),e=new n(\"finished\");t.setSwitchHandlerFn(e.addProject.bind(e)),e.setSwitchHandlerFn(t.addProject.bind(t))}}).init()})();"],"mappings":"AAAA","sourceRoot":""}